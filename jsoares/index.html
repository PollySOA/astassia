<!DOCTYPE html>
<html lang="es">

<head>
  <!-- ============================= -->
  <!-- CABECERA DEL DOCUMENTO HTML  -->
  <!-- ============================= -->
  <!-- Aquí se define la información básica de la página y los estilos que se van a usar -->
  <meta charset="UTF-8"> <!-- Permite usar acentos y caracteres especiales -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Hace que la web se vea bien en móvil -->
  <title>Monitor de Asteroides NEO - NASA</title> <!-- Título que aparece en la pestaña del navegador -->

  <!-- Bootstrap 5.3: estilos modernos y responsivos -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

  <!-- Google Fonts: fuentes personalizadas para títulos y textos -->
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap"
    rel="stylesheet">

  <!-- ============================= -->
  <!-- ESTILOS DE LA APP            -->
  <!-- ============================= -->
  <!-- Estilos externos organizados en css/styles.css -->
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!-- ============================= -->
  <!-- FONDO ANIMADO Y SISTEMA      -->
  <!-- ============================= -->
  <!--
    Este bloque crea un fondo animado con estrellas y un sistema Tierra-céntrico.
    Es solo decorativo y no afecta la funcionalidad, pero da un aspecto espacial.
    Dentro de #earth-system-container se dibujan:
      - La Tierra (centro)
      - El Sol, la Luna, satélites y asteroides girando en órbitas
    Todo esto se mueve con JavaScript/jQuery para dar sensación de movimiento real.
  -->
  <div id="earth-system-container">
    <!-- Sistema Tierra-céntrico -->
    <div class="earth-system">
      <!-- Tierra central -->
      <div class="earth-center"></div>

      <!-- Órbita y Sol -->
      <div class="orbit sun-orbit"></div>
      <div class="sun" id="sun"></div>

      <!-- Órbita y Luna -->
      <div class="orbit moon-orbit"></div>
      <div class="moon" id="moon"></div>

      <!-- Órbita de satélites -->
      <div class="orbit satellite-orbit"></div>
      <div class="satellite" id="satellite1"></div>
      <div class="satellite" id="satellite2"></div>
      <div class="satellite" id="satellite3"></div>

      <!-- Órbita de asteroides -->
      <div class="orbit asteroid-orbit"></div>
      <div class="asteroid" id="asteroid1"></div>
      <div class="asteroid" id="asteroid2"></div>
      <div class="asteroid" id="asteroid3"></div>
      <div class="asteroid" id="asteroid4"></div>
      <div class="asteroid" id="asteroid5"></div>
      <div class="asteroid" id="asteroid6"></div>
    </div>
  </div>

  <!-- ============================= -->
  <!-- BARRA DE NAVEGACIÓN          -->
  <!-- ============================= -->
  <!--
    Barra de navegación principal (navbar):
    Permite moverse entre las secciones de la app sin recargar la página.
    Cada enlace tiene un data-section que se usa en el JS para mostrar la sección correspondiente.
    El botón Login abre el modal de autenticación.
    El logo de la NASA es solo decorativo.
  -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#inicio">
        <img src="https://www.nasa.gov/wp-content/themes/nasa/assets/images/nasa-logo.svg" alt="NASA"
          onerror="this.style.display='none'">
        <i class="bi bi-circle-fill"></i> Monitor de Asteroides NEO
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link active" href="#inicio" data-section="inicio">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="#asteroides" data-section="asteroides">Asteroides</a></li>
          <li class="nav-item"><a class="nav-link" href="#tierra" data-section="tierra">Tierra</a></li>
          <li class="nav-item"><a class="nav-link" href="#explorar" data-section="explorar">Explorar</a></li>
          <li class="nav-item"><a class="nav-link" href="#eyes" data-section="eyes">Eyes Tools</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ============================= -->
  <!-- HERO CAROUSEL                -->
  <!-- ============================= -->
  <!--
    Carrusel de imágenes (heroCarousel):
    Muestra 3 slides con imágenes de fondo y mensajes destacados.
    Cada slide tiene un botón que lleva a una sección específica (asteroides seguros, peligrosos, o la Tierra).
    El carrusel se controla con los botones de flecha o los indicadores.
    Las imágenes de fondo se cargan desde Unsplash.
  -->
  <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="3"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <div class="carousel-bg"
          style="background-image: url('https://images.unsplash.com/photo-1614728894747-a83421e2b9c9?w=1920&q=80');">
        </div>
        <div class="carousel-caption">
          <h1 class="display-1 fw-bold neon-text-red">Asteroides Seguros</h1>
          <p class="lead">Objetos cercanos sin peligro para la Tierra</p>
          <a href="#asteroides" class="btn btn-danger-neon btn-lg mt-3" data-section="asteroides" data-filter="safe">Ver
            Asteroides Seguros</a>
        </div>
      </div>
      <div class="carousel-item">
        <div class="carousel-bg"
          style="background-image: url('https://images.unsplash.com/photo-1464802686167-b939a6910659?w=1920&q=80');">
        </div>
        <div class="carousel-caption">
          <h1 class="display-1 fw-bold neon-text-red">Asteroides Peligrosos</h1>
          <p class="lead">Objetos potencialmente peligrosos cerca de la Tierra</p>
          <a href="#asteroides" class="btn btn-danger-neon btn-lg mt-3" data-section="asteroides"
            data-filter="dangerous">Ver Asteroides Peligrosos</a>
        </div>
      </div>
      <div class="carousel-item">
        <div class="carousel-bg"
          style="background-image: url('https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=1920&q=80');">
        </div>
        <div class="carousel-caption">
          <h1 class="display-1 fw-bold neon-text-red">Explorar el Universo</h1>
          <p class="lead">Escucha Hubble y juega con la cámara espacial</p>
          <a href="#explorar" class="btn btn-danger-neon btn-lg mt-3" data-section="explorar">Explorar Ahora</a>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <!-- ============================= -->
  <!-- CONTENIDO PRINCIPAL DE LA APP -->
  <!-- ============================= -->
  <!--
    Aquí se muestran las diferentes secciones de la app.
    Solo una sección está visible a la vez (la que tiene la clase 'active').
    El cambio de sección se hace con JS al hacer clic en la navbar o los botones del carrusel.
  -->
  <main id="mainContent">
    <!-- ============================= -->
    <!-- SECCIÓN: INICIO             -->
    <!-- ============================= -->
    <!--
      Sección de bienvenida.
      Muestra el título y una breve descripción del sistema.
      Abajo se muestran tarjetas con estadísticas principales:
        - Total de asteroides detectados
        - Cuántos son peligrosos
        - Velocidad máxima registrada
        - El asteroide más cercano (en distancias lunares)
      Los valores se actualizan dinámicamente con JS.
    -->
    <section id="inicio" class="section-content active">
      <div class="container py-5">
        <h2 class="section-title text-center">Monitor de Asteroides NEO</h2>
        <p class="lead text-center mb-5">Sistema de seguimiento de objetos cercanos a la Tierra</p>

        <!--
          Tarjetas de estadísticas:
          Cada tarjeta muestra un dato clave sobre los asteroides.
          Los valores se rellenan con JavaScript al cargar los datos desde la API.
        -->
        <div class="row g-4 mb-5" id="statsContainer">
          <div class="col-md-3">
            <div class="stat-card">
              <i class="bi bi-circle text-primary" style="font-size: 2.5rem;"></i>
              <span class="stat-number text-primary" id="totalAsteroids">0</span>
              <span class="d-block">Total Asteroides</span>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <i class="bi bi-exclamation-triangle text-danger" style="font-size: 2.5rem;"></i>
              <span class="stat-number text-danger" id="dangerousCount">0</span>
              <span class="d-block">Peligrosos</span>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <i class="bi bi-speedometer2 text-warning" style="font-size: 2.5rem;"></i>
              <span class="stat-number text-warning" id="maxSpeed">0</span>
              <span class="d-block">Vel. Máx (km/h)</span>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-card">
              <i class="bi bi-moon text-info" style="font-size: 2.5rem;"></i>
              <span class="stat-number text-info" id="closestMoons">∞</span>
              <span class="d-block">Más Cercano (lunas)</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================= -->
    <!-- SECCIÓN: ASTEROIDES         -->
    <!-- ============================= -->
    <!--
      Lista de asteroides detectados por la NASA.
      Incluye filtros para ver todos, solo peligrosos o solo seguros.
      Al hacer clic en un filtro, se actualiza la lista sin recargar la página.
      La lista se llena dinámicamente con datos de la API o de respaldo.
      Cada asteroide muestra nombre, distancia, velocidad y nivel de peligro.
    -->
    <section id="asteroides" class="section-content">
      <div class="container py-5">
        <h2 class="section-title text-center">Lista de Asteroides</h2>

        <div class="card-custom">
          <!--
            Botones de filtro:
            - Todos: muestra todos los asteroides
            - Peligrosos: solo los que la NASA marca como potencialmente peligrosos
            - Seguros: los que no representan peligro
            El número entre paréntesis se actualiza con JS.
          -->
          <div class="mb-4">
            <button class="btn btn-outline-light filter-btn active me-2" data-filter="all">
              Todos (<span id="countAll">0</span>)
            </button>
            <button class="btn btn-outline-danger filter-btn me-2" data-filter="dangerous">
              Peligrosos (<span id="countDangerous">0</span>)
            </button>
            <button class="btn btn-outline-success filter-btn" data-filter="safe">
              Seguros (<span id="countSafe">0</span>)
            </button>
          </div>

          <!--
            Spinner de carga:
            Se muestra mientras se obtienen los datos de la API.
            Cuando termina la carga, se oculta y aparece la lista de asteroides.
          -->
          <div id="asteroidsLoading" class="text-center py-5">
            <div class="spinner-border text-danger" role="status">
              <span class="visually-hidden">Cargando...</span>
            </div>
            <p class="mt-3">⏳ Rastreando asteroides cercanos... (máx. 10 segundos)</p>
          </div>

          <!--
            Aquí se insertan los asteroides con JS.
            Cada asteroide es una tarjeta con información relevante.
            Con scroll para no ocupar demasiado espacio.
          -->
          <div id="asteroidsList"
            style="max-height: 400px; overflow-y: auto; border: 1px solid rgba(252, 61, 33, 0.2); border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
          </div>

          <div class="text-center">
            <button id="toggleAsteroidsFullView" class="btn btn-outline-danger" style="display: none;">
              <i class="bi bi-fullscreen"></i> Ver lista completa
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================= -->
    <!-- SECCIÓN: TIERRA              -->
    <!-- ============================= -->
    <!--
      Sección para mostrar imágenes de la Tierra desde el espacio.
      Utiliza la API EPIC de la NASA para obtener fotos recientes.
      Si la API falla, se usan imágenes de respaldo.
      El usuario puede navegar entre imágenes con botones.
    -->
    <section id="tierra" class="section-content">
      <div class="container py-5">
        <h2 class="section-title text-center">Tierra desde el Espacio</h2>

        <div class="card-custom">
          <!--
            Spinner de carga:
            Se muestra mientras se obtienen las imágenes de la Tierra.
            Cuando termina la carga, se muestra la imagen y los controles de navegación.
          -->
          <div id="earthLoading" class="loading-spinner">
            <div class="spinner-border"></div>
            <p class="mt-3">Cargando vista de la Tierra...</p>
          </div>

          <div id="earthContent" style="display: none;">
            <!--
              Aquí se inserta la imagen de la Tierra y los controles para navegar entre fotos.
              Si la API falla, se muestra una imagen de respaldo.
            -->
          </div>
        </div>
      </div>
    </section>

    <!-- ============================= -->
    <!-- SECCIÓN: EXPLORAR             -->
    <!-- ============================= -->
    <!--
      Herramientas interactivas de NASA para explorar el universo:
      - Escuchando Hubble: Sonificación de imágenes del telescopio Hubble
      - Camera Hubble: Juego interactivo con el telescopio Hubble
    -->
    <section id="explorar" class="section-content">
      <div class="container py-5">
        <h2 class="section-title text-center">🔭 Explorar el Universo</h2>

        <!-- TARJETA 1: Escuchando Hubble -->
        <div class="card-custom mb-4">
          <h3 class="mb-3"><i class="bi bi-music"></i> Escuchando Hubble</h3>
          <p class="mb-3">Hearing Hubble te permite transformar las imágenes del telescopio Hubble en música mediante la
            sonificación, un proceso que convierte colores y brillos en sonidos. Explora 10 impresionantes vistas del
            universo y crea tu propia sinfonía eligiendo instrumentos, armonías y patrones. ¡Comparte tu composición y
            escucha el cosmos como nunca antes!</p>

          <div id="hubbleListeningLoading" class="loading-spinner mb-3" style="display: none;">
            <div class="spinner-border"></div>
            <p class="mt-2">Cargando Escuchando Hubble...</p>
          </div>

          <div id="hubbleListeningContent" style="display: none;">
            <div class="ratio ratio-16x9 mb-3" style="max-height: 600px;">
              <iframe id="hubbleListeningIframe"
                src="https://www3.nasa.gov/specials/hubble-hearing-app/?5-2-false-1-4-0-0-50"
                style="border-radius: 10px; border: 2px solid rgba(252, 61, 33, 0.3);" allowfullscreen></iframe>
            </div>
            <a href="https://science.nasa.gov/mission/hubble/multimedia/online-activities/hearing-hubble/"
              target="_blank" class="btn btn-nasa">
              <i class="bi bi-box-arrow-up-right"></i> Ir a Hearing Hubble en NASA
            </a>
          </div>
        </div>

        <!-- TARJETA 2: Camera Hubble Juego -->
        <div class="card-custom mb-4">
          <h3 class="mb-3"><i class="bi bi-camera"></i> Camera Hubble - Juego</h3>
          <p class="mb-3">¡Juega a ser astrónomo! Utiliza la cámara del telescopio Hubble para capturar increíbles
            vistas del universo. Completa desafíos y descubre objetos espaciales fascinantes.</p>

          <button class="btn btn-danger-neon btn-lg mb-3 play-hubble-game-btn" id="playHubbleGameBtn">
            <i class="bi bi-play-circle"></i> ¡Juega Ahora!
          </button>

          <div id="hubbleGameLoading" class="loading-spinner mb-3" style="display: none;">
            <div class="spinner-border"></div>
            <p class="mt-2">Cargando Camera Hubble...</p>
          </div>

          <div id="hubbleGameContent" style="display: none;">
            <div class="ratio ratio-16x9 mb-3" style="max-height: 600px;">
              <iframe id="hubbleGameIframe" src="https://www3.nasa.gov/specials/hubble-adventure-app/"
                style="border-radius: 10px; border: 2px solid rgba(252, 61, 33, 0.3);" allowfullscreen></iframe>
            </div>
            <a href="https://www3.nasa.gov/specials/hubble-adventure-app/" target="_blank" class="btn btn-nasa">
              <i class="bi bi-box-arrow-up-right"></i> Abrir en pantalla completa
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================= -->
    <!-- SECCIÓN: NASA EYES TOOLS      -->
    <!-- ============================= -->
    <!--
      Herramientas interactivas de NASA Eyes:
      - Eyes on the Earth: muestra datos en tiempo real del satélite SWOT (nivel del agua, topografía oceánica)
      - Eyes on Asteroids: visualización 3D de asteroides cercanos a la Tierra
      Cada tarjeta tiene un botón para cargar la vista y otro para actualizarla.
      El contenido se inserta dinámicamente con JS.
    -->
    <section id="eyes" class="section-content">
      <div class="container py-5">
        <h2 class="section-title text-center">👁️ NASA Eyes Tools</h2>

        <div class="row g-4">
          <!--
            Dos tarjetas principales:
            - Eyes on the Earth: integra un visor interactivo de la NASA para ver datos de la Tierra
            - Eyes on Asteroids: visor 3D de asteroides y sus órbitas
            Los visores se cargan solo cuando el usuario lo solicita (para ahorrar recursos).
          -->
          <!-- Card de Eyes on the Earth con integración directa -->
          <div class="col-md-6">
            <div class="eyes-card">
              <h3 style="color: var(--nasa-blue); margin-bottom: 1rem;">
                🌍 Eyes on the Earth - SWOT
              </h3>
              <p style="line-height: 1.6;">
                Monitorea los datos ambientales de la Tierra en tiempo real con el satélite SWOT.
                Visualiza topografía oceánica y datos hidrológicos directamente en esta ventana.
              </p>

              <!--
                Aquí se inserta el visor interactivo de NASA Eyes para la Tierra.
                Si la carga falla, se muestra información de respaldo.
              -->
              <div id="nasaEyesContainer" class="mt-3">
                <div class="loading-spinner" id="eyesLoading">
                  <div class="spinner-border"></div>
                  <p class="mt-2">Cargando NASA Eyes...</p>
                </div>
                <div id="eyesContent" style="display: none;">
                  <!-- Aquí se cargará el contenido dinámicamente -->
                </div>
              </div>

              <div class="mt-3">
                <!--
                  Botones:
                  - Cargar Vista: inserta el visor de NASA Eyes
                  - Actualizar: recarga el visor por si hay cambios o errores
                -->
                <!-- Botones para cargar o actualizar la vista de NASA Eyes -->
                <button class="btn btn-danger-neon me-2" onclick="loadNASAEyes('swot')">
                  <i class="bi bi-play-circle"></i> Cargar Vista
                </button>
                <button class="btn btn-outline-light" onclick="refreshNASAEyes('swot')">
                  <i class="bi bi-arrow-clockwise"></i> Actualizar
                </button>
              </div>
            </div>
          </div>

          <!-- Card de Eyes on Asteroids con integración directa -->
          <div class="col-md-6">
            <div class="eyes-card">
              <h3 style="color: var(--nasa-blue); margin-bottom: 1rem;">
                ☄️ Eyes on Asteroids
              </h3>
              <p style="line-height: 1.6;">
                Explora en 3D los asteroides cercanos a la Tierra. Visualiza sus órbitas,
                tamaños y trayectorias en tiempo real con datos actualizados de la NASA.
              </p>

              <!--
                Aquí se inserta el visor interactivo de NASA Eyes para asteroides.
                Si la carga falla, se muestra información de respaldo.
              -->
              <div id="nasaAsteroidsContainer" class="mt-3">
                <div class="loading-spinner" id="asteroidsEyesLoading">
                  <div class="spinner-border"></div>
                  <p class="mt-2">Cargando vista de asteroides...</p>
                </div>
                <div id="asteroidsEyesContent" style="display: none;">
                  <!-- Aquí se cargará el contenido dinámicamente -->
                </div>
              </div>

              <div class="mt-3">
                <!--
                  Botones:
                  - Cargar Vista: inserta el visor de NASA Eyes Asteroids
                  - Actualizar: recarga el visor por si hay cambios o errores
                -->
                <!-- Botones para cargar o actualizar la vista de NASA Eyes Asteroids -->
                <button class="btn btn-danger-neon me-2" onclick="loadNASAEyes('asteroids')">
                  <i class="bi bi-play-circle"></i> Cargar Vista
                </button>
                <button class="btn btn-outline-light" onclick="refreshNASAEyes('asteroids')">
                  <i class="bi bi-arrow-clockwise"></i> Actualizar
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- ============================= -->
        <!-- SECCIÓN: COMENTARIOS Y VALORACIÓN -->
        <!-- ============================= -->
        <!--
          Aquí los usuarios autenticados pueden dejar comentarios y valoraciones sobre la app.
          El formulario solo aparece si el usuario ha iniciado sesión.
          Los comentarios se guardan en localStorage y se muestran en la misma sección.
        -->
        <div class="card-custom mt-4">
          <h4 style="color: var(--nasa-blue);">Comentarios y Valoración</h4>
          <div id="commentsSection"></div>
          <div id="commentFormContainer"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- ============================= -->
  <!-- MODAL DE AUTENTICACIÓN        -->
  <!-- ============================= -->
  <!--
    Ventana emergente (modal) para iniciar sesión o registrarse.
    Incluye dos formularios:
      - Login: para usuarios existentes
      - Registro: para nuevos usuarios
    El cambio entre formularios se hace con enlaces dentro del modal.
    Los datos se validan antes de enviarse.
  -->

  <!-- ============================= -->
  <!-- PIE DE PÁGINA                 -->
  <!-- ============================= -->
  <!--
    Pie de página con información del proyecto y créditos.
    Aquí puedes poner tu nombre, tecnologías usadas y cualquier aviso legal.
  -->
  <footer class="footer">
    <div class="container text-center">
      <h5>Monitor de Asteroides NEO</h5>
      <p>Proyecto jQuery - Pollyanna Soares (jsoares)</p>

    </div>
  </footer>

  <!--
    jQuery 3.7.1:
    Librería que facilita la manipulación del DOM, eventos y peticiones AJAX.
    Esencial para que funcione toda la lógica de la app.
  -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <!--
    Bootstrap 5.3 JS:
    Scripts para el menú, el carrusel y otros componentes interactivos.
    Permite que la app sea responsiva y moderna.
  -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!--
    Configuración y lógica principal de la app:
    - config.js: contiene las claves y URLs de la NASA, y parámetros globales
    - api.js: toda la lógica de la app (navegación, carga de datos, autenticación, comentarios)
    Ambos archivos son esenciales para el funcionamiento.
  -->
  <script src="js/config.js"></script>
  <script src="js/api.js"></script>
</body>

</html>